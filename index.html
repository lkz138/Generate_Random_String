<!DOCTYPE html>
<html lang="ja" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <title>GetRandStr</title>
    <script type="text/javascript" src="https://apis.google.com/js/api.js"></script>
    <script type="text/javascript" src="https://www.google.com/recaptcha/api.js?render=6LfCHdcUAAAAAOwkHsW_7W7MfoOrvoIw9CXdLRBA"></script>
    <script type="text/javascript">
      function grecaptcha_init(token, act)
      {
        /*
        * Admin console url is 'https://www.google.com/recaptcha/admin'
        */

        grecaptcha.ready(function() {

          try {
            grecaptcha.reset(token, {action: act});
          } catch (e) {}

          try {
            grecaptcha.execute(token, {action: act}).then(function(token) {
              sessionStorage.setItem( (btoa(location.href)).slice(0, 16) + '.reCAPTCHA', token );
            });
          } catch (e) {}

        });
      }
    </script>
    <script type="text/javascript">
      grecaptcha_init('6LfCHdcUAAAAAOwkHsW_7W7MfoOrvoIw9CXdLRBA', 'homepage');
    </script>
    <!--==================================================-->
    <script type="text/javascript">
      function sendRequest()
      {
        $.ajax({
          url: './api/',
          type: 'GET',
          timeout: 5000,
          data: {
            len: $('#len').val(),
            chr: $('#chr').val(),
          }
        })
        .done(function(rawdata){
          console.log(rawdata);
        })
        .fail(function(rawdata){
          console.log(rawdata);
        })
        .always(function(){
          grecaptcha_init();
        });
      }
    </script>

    <script type="text/javascript">
      $(function(){
        $('input[type="submit"]').click(function(){
          sendRequest();
          return false;
        });

        $('#len_gui').change(function(){
          $('#len').val($(this).val());
        });

        $('#len, #len_gui').attr({
          min: 1,
          value: 8,
        });
      });
    </script>

    <style media="screen">
      .grecaptcha-badge
      {
        display: none;
      }
      section#main
      {
        margin: 0 auto;
        width: 90%;
        max-width: 720px;
      }
      section#main div.preference
      {
        background-color: azure;
        float: left;
        height: 200px;
        padding-right: 15px;
      }
      section#main div.preference div
      {
        width: 85px;
      }
      section#main div.preference div li
      {
        list-style-type: circle;
        list-style-position: outside;
      }
      section#main div.preference div input:not([type=checkbox])
      {
        width: 100%;
      }
    </style>
  </head>
  <body>
    <section id="main">
      <h3><script type="text/javascript">document.write(document.title);</script></h3>
      <div class="preference _len">
        <h4>文字数</h4>
        <div><input type="range" id="len_gui"></div>
        <div><input type="number" id="len"></div>
        <div><li>1以上</li></div>
      </div>
      <div class="preference _chr">
        <h4>文字型</h4>
        <div><input type="checkbox" id="chr_1" checked><label for="chr_1">英小字</label></div>
        <div><input type="checkbox" id="chr_2" checked><label for="chr_2">英大字</label></div>
        <div><input type="checkbox" id="chr_3" checked><label for="chr_3">数字</label></div>
        <div><input type="checkbox" id="chr_4" checked><label for="chr_4">記号</label></div>
      </div>
    </section>
  </body>
</html>
